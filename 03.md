# Реляційні бази даних
> Реляційні бази даних - це бази даних, у яких інформація зберігається у взаємопов'язаних таблицях. 

Термін "реляційні" походить від англійського **relation** - відношення. Це означає, що інформація, що зберігається у одній таблиці має якесь відношення (зв'язок) з даними іншої таблиці.

## Створення реляційних баз даних
Першим кроком у створенні реляційної бази даних є визначення схеми даних. Схема даних - це опис того, які таблиці буде містити база даних, які атрибути будуть у кожній таблиці та які будуть відношення між цими таблицями.

Іншими словами, можна сказати, що плануючи базу даних для деякої предметної області спочатку визначають: 
1. об'єкти, інформацію про які буде збережено у БД.
2. властивості кожного об'єкта
3. відношення які існують між об'єктами

### Схема даних предметної області "Ветеринарна клініка"
Для прикладу розглянемо предметну область Ветеринарна клініка. 
Слідуючи трьом першим пунктам, ми повинні визначити об'єкти цієї БД.
У цій області можна виділити наступні об'єкти:

- лікарі (без них ніяк...)
- тварини (все для них...)
- власники тварин (а хто ж приведе тваринку?)

Наступним кроком є визначення властивостей кожного об'єкта які будемо зберігати. Звичайно можна навигадувати багато властивостей кожного об'єкта, але ми оберемо кілька найпотрібніших. Отже...
#### Лікарі
- ПІБ лікаря
- спеціальність
- номер телефону
- електронна пошта


Оскільки до клініки тварина приходить не сама, а з власником, то інформацію про нього ми опишемо раніше.

#### Власник тварини
- ПІБ власника
- номер телефону (*а раптом тваринка залишиться у клініці*)
- домашня адреса (*ну мало що, може треба, щоб лікар приїхав додому...*)
- електронна пошта (*сюди будемо надсилати квитанцію про оплату*)

Ну і нарешті тваринки. Тут інформації для зберігання може бути більше. 

#### Тварини
- вид тварини
- порода
- кличка
- вік
- стать
- забарвлення шкіри

Отже ми визначили три об'єкти та їх властивості і можна починати вносити дані. Але, виконавши вже немало роботи ми забули про одну дуже важливу річ - відношення між об'єктами. Хоча, а що в цьому важливого і незрозумілого? 

-  Лікар лікує Тварину;
-  Власник тварини є власником Тварини;
-  Тварина лікується у Лікаря. 

Все зрозуміло, але, не варто забувати, що інформація про об'єкти зберігається в таблицях і ці відношення (зв'язки) повинні бути присутні саме в таблицях. 

Щоб зрозуміти як це працює у реальній ситуації, спробуємо побудувати хоча б одну таблицю для нашої бази даних.

## Таблиці у базах даних

Отже якщо у клініці працює хірургом Петренко Віктор Іванович та Семеренко Іван Тарасович і терапевт Вернидуб Петро Григорович то маємо таку собі табличку....

| ПІБ лікаря                  | Спеціальність   | Телефон      |	Email            |
|-----------------------------|-----------------|--------------|------------------- |
| Петренко Віктор Іванович    | Хірург          | +3806184373  | petrenko@email.com |
| Вернидуб Петро Григорович   | Терапевт        | +3806184373  | vernidub@email.com |
| Семеренко Іван Тарасович    | Хірург		  | +3343453463  | semerenko@email.com |


Отже наші властивості Лікаря перетворилися на **стовпці**, а інформація про кожного Лікаря - це сукупність стовпців в одному рядку. 

#### ЗАПАМʼЯТАЙТЕ!
> У базах даних, стовпці називають **полями**, а рядок, що охоплює всі поля для одного лікаря - **запис**.

Отже наша таблиця Лікарі складається з чотирьох полів і має три записи.

### Проблема 1
Коли ми говоримо хто буде лікувати тварину, ми за звичай називаємо ім'я лікаря, але з часом, до клініки може доєднатися ще один лікар. І уявіть собі ситуацію, що його ім'я буде Семеренко Іван Тарасович і він теж виявиться хірургом! Тепер у таблиці існуватиме два лікарі з однаковими іменами і у відповідь власнику, що його тварину буде лікувати Семеренко Іван Тарасович, незрозуміло який саме лікар це робитиме... Та і для бази даних неправильним буде той факт, що головною властивістю, що визначає лікаря буде така властивість, що може повторюватися. Більше того, це неприпустимо.

Дивлячись на базу даних ми можемо сказати, що номер телефону, чи електронна адреса у кожного лікаря різна, а тому головною властивістю можна визначити одне з цих полів, але може трапитися так, що лікар змінить номер телефону чи email і щоб не опиратися на поля, що можуть змінюватися у процесі існування бази даних, до таблиць вносять поле, яке містить унікальний номер кожного об'єкта. 

Зазвичай ці поля називають ID (ідентифікатор). Якщо Вам уже є 15 років то Ви точно отримали ID-картку (паспорт) у якому є унікальний номер, що не повторюється для інших громадян країни.

Отже тепер ми доповнимо таблицю ще одним полем ID. Воно буде зберігати числовий, унікальний код кожного запису. А наші два лікарі тепер будуть абсолютно різними лікарями для нашої БД, бо кожен з них має унікальне значення поля ID. І наша таблиця вже складатиметься з 5 полів.

#### ЗАПАМʼЯТАЙТЕ!
> Поле, що містить унікальне, неповторюване значення для кожного запису називають **ключовим** або **первинним ключем** таблиці.
#### Таблиця ЛІКАРІ.

|ID | ПІБ лікаря                  | Спеціальність   | Телефон      |	Email            |
|---|-----------------------------|-----------------|--------------|------------------- |
|1  | Петренко Віктор Іванович    | Хірург          | +3806184373  | petrenko@email.com |
|2  | Вернидуб Петро Григорович   | Терапевт        | +3806184373  | vernidub@email.com |
|3  | Семеренко Іван Тарасович    | Хірург		  | +3343453463  | semerenko@email.com |
|4  | Семеренко Іван Тарасович    | Хірург		  | +3674453463  | semivan@email.com |


Тепер створюючи таблицю Власники, ми зарані подбаємо про первинний ключ і наша таблиця може мати наступний вигляд:

#### Таблиця ВЛАСНИКИ.

|ID | ПІБ власника                | Телефон      |	Email            |
|---|-----------------------------|--------------|------------------- |
|1  | Заїка Степан Михайлович    |  +3804567373  | zaika@email.com |
|2  | Дудка Марина Вікторівна   |  +3805768973  | dudka@email.com |



## Відношення між таблицями

Це найцікавіша і найважча частина для розуміння. Щоб почати її розуміти, давайте подумаємо про те, а як у таблицях зберегти інформацію про те, хто є власником тієї чи іншої тварини?

Якщо повернутися на початок і не думати про базу даних, про впорядкування і нормалізацію (*нормальні і ненормальні бази даних* `:)` - жарт, але з долею правди. ), то при першому враженні всім хочеться зберігати інформацію про тварину так:

| Вид | Кличка | Вік | Порода | Власник | Телефон власника | Адреса власника |і ще багато чого|
|-----|--------|-----|--------|---------|------------------|-----------------|----------------|
|собака|Барон|3|Вівчарка|Дудка С.О.|+38091353546|вул. Миру 1| і ще багато чого |

### Проблема
Але якщо раптом Дудка С.О. має ще одну тварину чи навіть кілька!? Це означає, що у нашій базі даних буде ось така ситуація (проблема)
| Вид | Кличка | Вік | Порода | Власник | Телефон власника | Адреса власника |і ще багато чого|
|-----|--------|-----|--------|---------|------------------|-----------------|----------------|
|собака|Барон|3|Вівчарка|Дудка С.О.|+38091353546|вул. Миру 1| і ще багато чого |
|собака|Марс|3|Вівчарка|Дудка С.О.|+38091353546|вул. Миру 1| і ще багато чого |
|собака|Рекс|3|Вівчарка|Дудка С.О.|+38091353546|вул. Миру 1| і ще багато чого |

А уявіть, собі неймовірну ситуацію, що власник має 1000 собак!!! З цього випливає, що зберігаючи інформацію про собаку ми б кожного разу мусили б зберігати інформацію про власника. А це призводить до переповнення бази даних надлишковою інформацією.

## Зовнішні ключі

Для того, щоб не стикатися і проблемою описаною вище до таблиць додають поле (зовнішній ключ), що містять інформацію про первинний ключ таблиці яка має відношення до даної.

У нашому випадку у Тварини є Власник, але ж і у Власника є Тварина? Куди ж потрібно додати зовнішній ключ? Щоб розібратися з цим, треба ретельніше розібратися з відношеннями між об'єктами. 

Один Власник може мати багато Тварин, але одна тварина має лише одного власника (того, кого зберегли у базі даних). І ось саме до таблиці, яка має відношення **один до одного** і варто додавати **зовнішній ключ**. Це буде звичайне поле з назвою Власник. Але ми можемо вказати базі даних, що це буде саме зовнішній ключ який вказуватиме на таблицю Власник.

А отже, врахувавши це наша таблиця ТВАРИНИ матиме вигляд

#### Таблиця ТВАРИНИ.

|ID | Вид    | Порода   | Кличка      |	Вік            | ВЛАСНИК|решта полів |
|---|-----------------------------|-----------------|------|--------|----|--------------- |
|1  | собака | вівчарка          | Барон  | 3 |1||
|2  | кіт   | сфінкс        | Марс  | 2 |2||
|3  | папуга    | какаду		  | Флінт  | 5 |1||
|4  | собака    | мопс		  | Халк  | 7 |2||


## ЗАВДАННЯ

- Проаналізуйте запропоновані таблиці та визначте, хто є власником папуги та кота?
- Створіть модель бази даних до предметної області Бібліотека, з такими об'єктами: Книга, Автор, Видавництво. У табличному процесорі створіть книгу з відповідною кількістю аркушів (таблиць), у яких опишіть властивості кожного об'єкта. Позначте червоним кольором поле з первинним ключем та синім кольором поле з зовнішнім ключем.

## Як же створюються бази даних?
Це покладено на плечі системи керування базою даних та розробника, який має знати мову SQL.
Після визначення схеми даних можна створити таблиці та відношення між ними. Для створення таблиць можна використовувати SQL (Structured Query Language), мову запитів до реляційних баз даних.

Або ж можна скористатися клієнтом бази даних і створити таблиці у візуальному конструкторі. Одним із таких клієнтів може бути [Adminer](https://adminer.org) .
